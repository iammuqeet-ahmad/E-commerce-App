# README

This README would normally document whatever steps are necessary to get the
application up and running.

Things you may want to cover:

* Ruby version
  - Ruby [2.7.2](https://www.ruby-lang.org/en/news/2019/12/25/ruby-2-7-0-released/)
	- Rails [5.2.8](https://guides.rubyonrails.org/5_2_release_notes.html)
  - Postgresql 14

* Additional Gems
  - active_storage_validations
	- pg
	- devise
	- devise_invitable
	- jquery-rails
	- kaminari
	- cloudinary
	- ransack
  - stripe
	- pundit
  - figaro

* Application up and running at 
    https://e-commerce-213.herokuapp.com/

* Configuration
  1. clone code from git before starting.
  2. system dependency must be installed like ruby, rails and postgres of above mentioned versions.
  3. first RVM and then ruby and rails needs to be installed. run following commands.
    ```
    curl -L get.rvm.io | bash -s stable
    sudo apt-get install build-essential openssl libreadline6-dev
    rvm install 2.7
    gem install bundler
    gem install bundler -v 1.17
    gem install rails

    ```
* System dependencies
  1. Above mentioned versions of Ruby, Rails, Postgresql are madatory 
  2. need to setup the configuration properly as above mentioned.
  3. Add additional gems
  4. For devise confirmation add mailer configuration to all the enviroments.

* Database creation
  1. for database creation first run command *rails db:setup* which will create and setup database all together.
  2. you might need to create a database of the test project application inside postgresql before starting server

* Database initialization
  1. run all the migrations inside the rails application using command *rails db:migrate* which will run migration in order

* Deployment instructions
  1. Login to Heroku
  2. Create a new App there
  3. Push your app from github and enable the aauto update feature this will help you in autoupdating your app when ever you push your code to that branch.
  4. Install Heroku CLI localy. https://devcenter.heroku.com/articles/heroku-cli (follow any of the method. I followed npm)
  5. do the login in your editor(vs code terminal) localy heroku login
  6. run *heroku pg:migrate* to push your db to heroku. 
  7. run *heroku open* to open the app on production/

* Start the Rails server
  You can start the rails server at localhost using the command given below.
  ```
  rails s
  ```
  And now you can visit the site with the URL http://localhost:3000

* ...


OverView of the documentation, see the documentation at URL https://docs.google.com/document/d/1KKPTxxKBzL9ELBheIvQP-3aA1piSjDp5/edit
1. Users
  - A user can signup and signin.
  - There should be also the required information in the users table.
  - A user can have a display picture

2. Products
  - Add all the required information in its table.
  - A user can create products.
  - A user can edit/delete his own products.
  - A product can have many images.
  - A product must have a unique serial number that will be auto generated by the system.

3. Comments
  - Add required information in its table.
  - A product can have many comments.
  - A user cannot comment on his own product.
  - A user can edit/delete his own comments.
  - *All comments should be created without reloading the page.
  - *There should be a list of comments of products at its show page and comments should be added here as well just like linkedin/facebook does.

4. Cart
  - A user can add some products in his cart.
  - A user cannot add his own products in his cart.
  - A user can edit the quantity of the products that are in the cart.
  - A user can remove products from his cart.
  - *If a user is not logged in our application and adds products in his cart then when he tries to checkout then he should be asked to either signup or signin and after that all the products in the cart should be mapped to his own cart.

5. Checkout
  - Implement Stripe as a payment method.
  - Maintain all kind of data around user actions of orders/payments etc(building a view of these records will be a bonus, but maintaining this data is mandatory)

6. Search
  - There should be a search field in the header of the application from where if a user tries to search for a product then the list should be populated below the search field and upon clicking on the option a user should be redirected to its show page.
  - You may implement “thinking sphinx” for searching. Or you can use any other full text search technique (if you use ILIKE/LIKE you must implement proper TRGM GIN index for full text search).

7. Coupons/Promo Codes
  - Promo codes can be defined from the console(to keep it simple for now). Promo codes will have a percentage discount value against the code name, code will be all capital and can only contain alphanumeric characters with at-least one character must, length between 4-10 characters.
  - Promo codes will also have valid_til date, after which promo codes will no longer work.
  - No UI for managing the coupon codes is needed for the scope of this project.
  - You should see some promo codes as: DEVS1NC: 0.3, PAKARMY: 0.5, AZADI: 0.3
